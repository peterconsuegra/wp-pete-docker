;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
; Pete Panel – PHP 8.3 production profile
; Hetzner CCX33 (32GB RAM / 8 vCPU), WordPress + WooCommerce
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

[PHP]
; — Core limits —

default_charset = "UTF-8"

memory_limit = 768M                 ; bump to 1024M only if you truly need it
max_execution_time = 120
max_input_time = 120
max_input_vars = 5000
post_max_size = 128M
upload_max_filesize = 128M
default_socket_timeout = 60
output_buffering = 4096
implicit_flush = Off
expose_php = Off
short_open_tag = Off
zend.enable_gc = On

; — Timezone —
date.timezone = America/Bogota

; — Errors (quiet prod) —
error_reporting = E_ALL & ~E_DEPRECATED & ~E_STRICT
display_errors = Off
display_startup_errors = Off
log_errors = On
; leave error_log unset here; pool-level error_log will be used

; — Filesystem perf —
realpath_cache_size = 4096K
realpath_cache_ttl  = 600

; — Opcache (critical for WP) —
opcache.enable = 1
opcache.enable_cli = 0

; JIT gives no benefit for typical WP workloads
opcache.jit = 0
opcache.jit_buffer_size = 0

; Big sites = lots of files
opcache.memory_consumption      = 512    ; MB
opcache.interned_strings_buffer = 64     ; MB
opcache.max_accelerated_files   = 131072
opcache.max_wasted_percentage   = 5

opcache.use_cwd              = 1
opcache.validate_timestamps  = 0         ; PROD: immutable code; reset on deploy
opcache.revalidate_freq      = 0
opcache.save_comments        = 1
opcache.enable_file_override = 1
opcache.fast_shutdown        = 1
opcache.consistency_checks   = 0

; — Sessions (WP rarely uses, but keep sane defaults) —
session.gc_probability = 1
session.gc_divisor     = 1000
session.gc_maxlifetime = 2880
session.use_strict_mode = 1
session.cookie_httponly = 1
session.cookie_secure = 1
session.use_only_cookies = 1

; — Security —
cgi.fix_pathinfo = 0
; keep disable_functions empty; WP/CLI often needs proc_open et al.
disable_functions =

; — PDO/MySQL —
mysql.allow_persistent = On
mysqli.allow_persistent = On
pdo_mysql.default_socket =
request_order = "GP"
variables_order = "GPCS"

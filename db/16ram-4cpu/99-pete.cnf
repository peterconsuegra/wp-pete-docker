[mysqld]
# ─── Core sizing for 8G cgroup cap (reserve ~6G for InnoDB) ───
innodb_buffer_pool_size = 6G

# Redo logs & durability
innodb_log_file_size    = 1G
innodb_log_buffer_size  = 256M
innodb_flush_log_at_trx_commit = 1

# SSD-friendly I/O
innodb_flush_method      = O_DIRECT
innodb_flush_neighbors   = 0
innodb_io_capacity       = 2000
innodb_io_capacity_max   = 4000

# Threads (supported in 10.6)
innodb_read_io_threads   = 4
innodb_write_io_threads  = 4

# Connections / caches
max_connections          = 200
table_open_cache         = 4000
table_definition_cache   = 2000
open_files_limit         = 262144

# Per-connection buffers (keep conservative)
max_allowed_packet       = 256M
tmp_table_size           = 128M
max_heap_table_size      = 128M
sort_buffer_size         = 4M
join_buffer_size         = 4M
read_buffer_size         = 2M
read_rnd_buffer_size     = 4M
tmpdir = /tmp

# Startup warmup
innodb_buffer_pool_load_at_startup  = 1
innodb_buffer_pool_dump_at_shutdown = 1

# General
character-set-server     = utf8mb4
collation-server         = utf8mb4_unicode_ci
skip-name-resolve
sql_mode                 = STRICT_TRANS_TABLES,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION
query_cache_type         = 0
query_cache_size         = 0

# Aria (used by system/tmp in MariaDB)
aria_pagecache_buffer_size = 256M
aria_sort_buffer_size      = 128M

performance_schema = ON

# SSL disabled per your setup
ssl=0
skip_ssl

[client]
ssl=0
